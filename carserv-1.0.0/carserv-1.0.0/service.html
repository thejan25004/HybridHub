<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>CarServ - Car Repair HTML Template</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Barlow:wght@600;700&family=Ubuntu:wght@400;500&display=swap" rel="stylesheet"> 

    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/animate/animate.min.css" rel="stylesheet">
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="lib/tempusdominus/css/tempusdominus-bootstrap-4.min.css" rel="stylesheet" />

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet">

    <style>

        /*testimonial*/
        .testimonial-container {
            max-width: 2000px;
            margin-left: 25px;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            overflow: hidden;
            /*border: 3px solid black; !* Added black border with 3px thickness *!*/
        }

        .testimonial-form {
            padding: 40px;
            background-color: #f8f9fa;
        }
        .testimonial-preview {
            display: flex;
            flex-wrap: nowrap;
            overflow-x: auto;
            gap: 20px;
            padding: 20px;
            background-color: white;
        }
        .testimonial-card {
            min-width: 300px;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            transition: transform 0.3s;
        }
        .testimonial-card:hover {
            transform: scale(1.05);
        }
        .testimonial-card img {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 15px;
        }
        .photo-preview {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            margin: 0 auto 20px;
            border: 3px solid #007bff;
        }
        .form-control, .btn {
            border-radius: 50px;
        }
    </style>
</head>

<body>
    <!-- Spinner Start -->
    <div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
        <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
    <!-- Spinner End -->


    <!-- Topbar Start -->
    <div class="container-fluid bg-light p-0">
        <div class="row gx-0 d-none d-lg-flex">
            <div class="col-lg-7 px-5 text-start">
                <div class="h-100 d-inline-flex align-items-center py-3 me-4">
                    <small class="fa fa-map-marker-alt text-primary me-2"></small>
                    <small>123 Street, New York, USA</small>
                </div>
                <div class="h-100 d-inline-flex align-items-center py-3">
                    <small class="far fa-clock text-primary me-2"></small>
                    <small>Mon - Fri : 09.00 AM - 09.00 PM</small>
                </div>
            </div>
            <div class="col-lg-5 px-5 text-end">
                <div class="h-100 d-inline-flex align-items-center py-3 me-4">
                    <small class="fa fa-phone-alt text-primary me-2"></small>
                    <small>+012 345 6789</small>
                </div>
                <div class="h-100 d-inline-flex align-items-center">
                    <a class="btn btn-sm-square bg-white text-primary me-1" href=""><i class="fab fa-facebook-f"></i></a>
                    <a class="btn btn-sm-square bg-white text-primary me-1" href=""><i class="fab fa-twitter"></i></a>
                    <a class="btn btn-sm-square bg-white text-primary me-1" href=""><i class="fab fa-linkedin-in"></i></a>
                    <a class="btn btn-sm-square bg-white text-primary me-0" href=""><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </div>
    </div>
    <!-- Topbar End -->


    <!-- Navbar Start -->
    <nav class="navbar navbar-expand-lg bg-white navbar-light shadow sticky-top p-0">
        <a href="index.html" class="navbar-brand d-flex align-items-center px-4 px-lg-5">
            <h2 class="m-0 text-primary"><i class="fa fa-car me-3"></i>CarServ</h2>
        </a>
        <button type="button" class="navbar-toggler me-4" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse">
            <div class="navbar-nav ms-auto p-4 p-lg-0">
                <a href="index.html" class="nav-item nav-link">Home</a>
                <a href="about.html" class="nav-item nav-link">About</a>
                <a href="service.html" class="nav-item nav-link active">Services</a>
                <div class="nav-item dropdown">
                    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Pages</a>
                    <div class="dropdown-menu fade-up m-0">
                        <a href="booking.html" class="dropdown-item">Booking</a>
                        <a href="team.html" class="dropdown-item">Technicians</a>
                        <a href="testimonial.html" class="dropdown-item">Testimonial</a>
                        <a href="404.html" class="dropdown-item">404 Page</a>
                    </div>
                </div>
                <a href="contact.html" class="nav-item nav-link">Contact</a>
            </div>
            <a href="" class="btn btn-primary py-4 px-lg-5 d-none d-lg-block">Get A Quote<i class="fa fa-arrow-right ms-3"></i></a>
        </div>
    </nav>
    <!-- Navbar End -->


    <!-- Page Header Start -->
    <div class="container-fluid page-header mb-5 p-0" style="background-image: url(img/carousel-bg-2.jpg);">
        <div class="container-fluid page-header-inner py-5">
            <div class="container text-center">
                <h1 class="display-3 text-white mb-3 animated slideInDown">Services</h1>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb justify-content-center text-uppercase">
                        <li class="breadcrumb-item"><a href="#">Home</a></li>
                        <li class="breadcrumb-item"><a href="#">Pages</a></li>
                        <li class="breadcrumb-item text-white active" aria-current="page">Services</li>
                    </ol>
                </nav>
            </div>
        </div>
    </div>
    <!-- Page Header End -->


    <!-- Service Start -->
    <div class="container-xxl service py-5">
        <div class="container">
            <div class="text-center wow fadeInUp" data-wow-delay="0.1s">
                <h6 class="text-primary text-uppercase">// Our Services //</h6>
                <h1 class="mb-5">Explore Our Services</h1>
            </div>
            <div class="row g-4 wow fadeInUp" data-wow-delay="0.3s">
                <div class="col-lg-4">
                    <div class="nav w-100 nav-pills me-4" id="service-tabs">
                        <!-- Service navigation pills will be populated here by JavaScript -->
                    </div>
                </div>
                <div class="col-lg-8">
                    <div class="tab-content w-100" id="service-content">
                        <!-- Service content tabs will be populated here by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Service End -->


    <!-- Booking Start -->
    <div class="container-fluid bg-secondary booking my-5 wow fadeInUp" data-wow-delay="0.1s">
        <div class="container">
            <div class="row gx-5">
                <div class="col-lg-6 py-5">
                    <div class="py-5">
                        <h1 class="text-white mb-4">Certified and Award Winning Car Repair Service Provider</h1>
                        <p class="text-white mb-0">Eirmod sed tempor lorem ut dolores. Aliquyam sit sadipscing kasd ipsum. Dolor ea et dolore et at sea ea at dolor, justo ipsum duo rebum sea invidunt voluptua. Eos vero eos vero ea et dolore eirmod et. Dolores diam duo invidunt lorem. Elitr ut dolores magna sit. Sea dolore sanctus sed et. Takimata takimata sanctus sed.</p>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="bg-primary h-100 d-flex flex-column justify-content-center text-center p-5 wow zoomIn" data-wow-delay="0.6s">
                        <h1 class="text-white mb-4">Book For A Service</h1>
                        <form>
                            <div class="row g-3">
                                <div class="col-12 col-sm-6">
                                    <input type="text" class="form-control border-0" placeholder="Your Name" style="height: 55px;">
                                </div>
                                <div class="col-12 col-sm-6">
                                    <input type="email" class="form-control border-0" placeholder="Your Email" style="height: 55px;">
                                </div>
                                <div class="col-12 col-sm-6">
                                    <select class="form-select border-0" style="height: 55px;">
                                        <option selected>Select A Service</option>
                                        <option value="1">Service 1</option>
                                        <option value="2">Service 2</option>
                                        <option value="3">Service 3</option>
                                    </select>
                                </div>
                                <div class="col-12 col-sm-6">
                                    <div class="date" id="date1" data-target-input="nearest">
                                        <input type="text"
                                            class="form-control border-0 datetimepicker-input"
                                            placeholder="Service Date" data-target="#date1" data-toggle="datetimepicker" style="height: 55px;">
                                    </div>
                                </div>
                                <div class="col-12">
                                    <textarea class="form-control border-0" placeholder="Special Request"></textarea>
                                </div>
                                <div class="col-12">
                                    <button class="btn btn-secondary w-100 py-3" type="submit">Book Now</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Booking End -->



    <!-- Testimonial Start -->

    <div class="testimonial-container">

        <div class="container mt-5 mb-5" >
            <div class="technician-header">
                <h5>// OUR TESTIMONIAL //</h5>
                <h1>Our Expert Testimonial</h1>
            </div>
        </div>
        <div class="row g-0">
            <div class="col-md-5 testimonial-form">
                <h3 class="text-center mb-4">Write a Testimonial</h3>
                <form id="testimonialForm">
                    <div class="mb-3">
                        <input type="text" id="clientName" class="form-control" placeholder="Your Name" required>
                    </div>
                    <div class="mb-3">
                        <input type="text" id="clientProfession" class="form-control" placeholder="Your Profession" required>
                    </div>
                    <div class="mb-3">
                        <textarea id="clientMessage" class="form-control" rows="4" placeholder="Your Testimonial" required></textarea>
                    </div>
                    <div class="mb-3 text-center">
                        <input type="file" id="clientPhoto" class="d-none" accept="image/*">
                        <label for="clientPhoto" class="btn btn-outline-primary">
                            <i class="fas fa-upload"></i> Upload Profile Picture
                        </label>
                        <img id="photoPreview" class="photo-preview mt-3" src="" style="display:none;">
                    </div>
                    <button type="submit" class="btn btn-primary w-100">Submit Testimonial</button>
                </form>
            </div>
            <div class="col-md-7">
                <div class="testimonial-preview" id="testimonialCarousel">
                    <!-- Testimonials will be dynamically loaded here -->
                </div>
            </div>
        </div>
    </div>
    <!-- Testimonial End -->


    <!-- Footer Start -->
    <div class="container-fluid bg-dark text-light footer pt-5 mt-5 wow fadeIn" data-wow-delay="0.1s">
        <div class="container py-5">
            <div class="row g-5">
                <div class="col-lg-3 col-md-6">
                    <h4 class="text-light mb-4">Address</h4>
                    <p class="mb-2"><i class="fa fa-map-marker-alt me-3"></i>123 Street, New York, USA</p>
                    <p class="mb-2"><i class="fa fa-phone-alt me-3"></i>+012 345 67890</p>
                    <p class="mb-2"><i class="fa fa-envelope me-3"></i>info@example.com</p>
                    <div class="d-flex pt-2">
                        <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-twitter"></i></a>
                        <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-facebook-f"></i></a>
                        <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-youtube"></i></a>
                        <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <h4 class="text-light mb-4">Opening Hours</h4>
                    <h6 class="text-light">Monday - Friday:</h6>
                    <p class="mb-4">09.00 AM - 09.00 PM</p>
                    <h6 class="text-light">Saturday - Sunday:</h6>
                    <p class="mb-0">09.00 AM - 12.00 PM</p>
                </div>
                <div class="col-lg-3 col-md-6">
                    <h4 class="text-light mb-4">Services</h4>
                    <a class="btn btn-link" href="">Diagnostic Test</a>
                    <a class="btn btn-link" href="">Engine Servicing</a>
                    <a class="btn btn-link" href="">Tires Replacement</a>
                    <a class="btn btn-link" href="">Oil Changing</a>
                    <a class="btn btn-link" href="">Vacuam Cleaning</a>
                </div>
                <div class="col-lg-3 col-md-6">
                    <h4 class="text-light mb-4">Newsletter</h4>
                    <p>Dolor amet sit justo amet elitr clita ipsum elitr est.</p>
                    <div class="position-relative mx-auto" style="max-width: 400px;">
                        <input class="form-control border-0 w-100 py-3 ps-4 pe-5" type="text" placeholder="Your email">
                        <button type="button" class="btn btn-primary py-2 position-absolute top-0 end-0 mt-2 me-2">SignUp</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="copyright">
                <div class="row">
                    <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                        &copy; <a class="border-bottom" href="#">Your Site Name</a>, All Right Reserved.

                        <!--/*** This template is free as long as you keep the footer author’s credit link/attribution link/backlink. If you'd like to use the template without the footer author’s credit link/attribution link/backlink, you can purchase the Credit Removal License from "https://htmlcodex.com/credit-removal". Thank you for your support. ***/-->
                        Designed By <a class="border-bottom" href="https://htmlcodex.com">HTML Codex</a>
                    </div>
                    <div class="col-md-6 text-center text-md-end">
                        <div class="footer-menu">
                            <a href="">Home</a>
                            <a href="">Cookies</a>
                            <a href="">Help</a>
                            <a href="">FQAs</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Footer End -->


    <!-- Back to Top -->
    <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>


    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="lib/wow/wow.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/counterup/counterup.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="lib/tempusdominus/js/moment.min.js"></script>
    <script src="lib/tempusdominus/js/moment-timezone.min.js"></script>
    <script src="lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js"></script>

    <!-- Template Javascript -->
    <script src="js/main.js"></script>

    <script>


        function getAllServices() {
            // Get the authentication token from localStorage
            let token = localStorage.getItem("authToken");
            const baseUrl = "http://localhost:8080"; // Add base URL definition

            // Log token for debugging (remove in production)
            console.log("Token present:", !!token);

            $.ajax({
                url: baseUrl + '/api/v1/service/getAll', // Add baseUrl
                method: 'GET',
                dataType: 'json',
                headers: {
                    "Authorization": token ? "Bearer " + token : ""
                },
                success: function(response) {
                    console.log("Services loaded successfully:", response);
                    displayServices(response, baseUrl); // Pass baseUrl to display function
                },
                error: function(xhr, status, error) {
                    console.error('Error details:', {
                        status: xhr.status,
                        statusText: xhr.statusText,
                        responseText: xhr.responseText
                    });

                    if (xhr.status === 401 || xhr.status === 403) {
                        alert('Authentication failed. Please log in again.');
                    } else if (xhr.status === 404) {
                        alert('Service API endpoint not found. Check the URL.');
                    } else {
                        alert('Failed to load services. Please try again later.');
                    }
                }
            });
        }

        // Function to display services in the UI
        function displayServices(services, baseUrl) { // Accept baseUrl parameter
            // Clear existing navigation buttons
            const navPills = $('#service-tabs');
            navPills.empty();

            // Clear existing tab content
            const tabContent = $('#service-content');
            tabContent.empty();

            // Populate services
            services.forEach((service, index) => {
                // Determine icon based on service name or use default
                let iconClass = 'fa-car-side';
                if (service.serviceName.includes('Engine')) {
                    iconClass = 'fa-car';
                } else if (service.serviceName.includes('Tire')) {
                    iconClass = 'fa-cog';
                } else if (service.serviceName.includes('Oil')) {
                    iconClass = 'fa-oil-can';
                }

                // Create nav pill button
                const isActive = index === 0 ? 'active' : '';
                const navButton = `
        <button class="nav-link w-100 d-flex align-items-center text-start p-4 mb-4 ${isActive}"
                data-bs-toggle="pill"
                data-bs-target="#tab-pane-${service.serviceId}"
                type="button">
            <i class="fa ${iconClass} fa-2x me-3"></i>
            <h4 class="m-0">${service.serviceName}</h4>
        </button>
    `;
                navPills.append(navButton);

                // Fix the image URL by prepending baseUrl if photoUrl exists
                const photoUrl = service.photoUrl ? baseUrl + service.photoUrl : 'img/service-default.jpg';

                // Create tab content
                const showActive = index === 0 ? 'show active' : '';
                const tabPane = `
        <div class="tab-pane fade ${showActive}" id="tab-pane-${service.serviceId}">
            <div class="row g-4">
                <div class="col-md-6" style="min-height: 350px;">
                    <div class="position-relative h-100">
                        <img class="position-absolute img-fluid w-100 h-100"
                             src="${photoUrl}"
                             style="object-fit: cover;" alt="${service.serviceName}">
                    </div>
                </div>
                <div class="col-md-6">
                    <h3 class="mb-3">${service.serviceName}</h3>
                    <p class="mb-4">${service.description}</p>
                    <p><i class="fa fa-check text-success me-3"></i>Quality Servicing</p>
                    <p><i class="fa fa-check text-success me-3"></i>Expert Workers</p>
                    <p><i class="fa fa-check text-success me-3"></i>Modern Equipment</p>
                    <p class="mb-4">Price: $${service.price.toFixed(2)}</p>
                    <a href="service-details.html?id=${service.serviceId}" class="btn btn-primary py-3 px-5 mt-3">
                        Read More<i class="fa fa-arrow-right ms-3"></i>
                    </a>
                </div>
            </div>
        </div>
    `;
                tabContent.append(tabPane);
            });
        }

        // Call the function when document is ready
        $(document).ready(function() {
            getAllServices();
        });




        //Testimonial Start



        $(document).ready(function () {
            // Photo preview
            $("#clientPhoto").on('change', function(event) {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        $('#photoPreview').attr('src', e.target.result).show();
                    }
                    reader.readAsDataURL(file);
                }
            });

            // Submit testimonial form
            $("#testimonialForm").submit(function (event) {
                event.preventDefault();

                let formData = new FormData();
                formData.append("name", $("#clientName").val());
                formData.append("profession", $("#clientProfession").val());
                formData.append("message", $("#clientMessage").val());

                let fileInput = $("#clientPhoto")[0].files[0];
                if (fileInput) {
                    formData.append("photo", fileInput);
                }

                $.ajax({
                    url: "http://localhost:8080/api/v1/testimonial/save",
                    type: "POST",
                    headers : {
                        "Authorization" : "Bearer " + token
                    },
                    data: formData,
                    processData: false,
                    contentType: false,
                    success: function (response) {
                        alert("Testimonial submitted successfully!");
                        loadTestimonials();
                        $("#testimonialForm")[0].reset();
                        $('#photoPreview').hide();
                    },
                    error: function (xhr) {
                        alert("Error: " + xhr.responseText);
                    }
                });
            });


            let token = localStorage.getItem("authToken");
            console.log("Token:", token);

            function loadTestimonials() {
                $.ajax({
                    url: "http://localhost:8080/api/v1/testimonial/getAll",
                    type: "GET",
                    headers: {
                        "Authorization": "Bearer " + token
                    },
                    success: function (testimonials) {
                        console.log("Testimonials received:", testimonials);
                        $("#testimonialCarousel").empty();
                        testimonials.forEach(function (testimonial) {
                            // Ensure the full URL is constructed correctly
                            let imgSrc = testimonial.photoPath
                                ? `http://localhost:8080${testimonial.photoPath}`
                                : "https://via.placeholder.com/100";

                            let testimonialItem = `
                    <div class="testimonial-card">
                        <img src="${imgSrc}" alt="${testimonial.name}" style="max-width:100px; max-height:100px; object-fit:cover;">
                        <h5 class="mb-1">${testimonial.name}</h5>
                        <p class="text-muted mb-3">${testimonial.profession}</p>
                        <p class="text-center">${testimonial.message}</p>
                    </div>`;
                            $("#testimonialCarousel").append(testimonialItem);
                        });
                    },
                    error: function (xhr, status, error) {
                        console.error("Full error details:", {
                            status: xhr.status,
                            responseText: xhr.responseText,
                            statusText: xhr.statusText,
                            error: error
                        });
                        alert(`Error loading testimonials: ${xhr.responseText || error}`);
                    }
                });
            }


            loadTestimonials();
        });

        //Testimonial End


    </script>
</body>

</html>